#{extends 'main.html' /}
#{set title:'access' /}

<div class="span-24 access">

    <div class="prepend-8 span-8"><h4>Repository: <b>${gituser}@${giturl}:${user}/${repository.name}.git</b></h4></div>

    <div class="prepend-6 span-6">
        <div class="panel list">
            <div class="title">current access list:</div>

            <div class="content">
                <div>read:
                    <ul>
                        #{list items:repository.readUsers, as:'user'}
                        <li>${user} | <a href="@{Repositories.accessDelete(repository.name, "read", user)}">del</a></li>
                        #{/list}
                    </ul>
                </div>

                <div>write:
                    <ul>
                        #{list items:repository.writeUsers, as:'user'}
                        <li>${user} | <a href="@{Repositories.accessDelete(repository.name, "write", user)}">del</a></li>
                        #{/list}
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="prepend-1 span-6 last">
        <div class="panel add">
            <div class="title">repository add access:</div>
            <div class="content">
                <form action="@{Repositories.accessAdd(repository.name)}" method="post">
                    <div><input type="radio" name="type" value="read" checked>read</div>
                    <div><input type="radio" name="type" value="write">write</div>
                    <div>user: <input type="text" name="username"/></div>
                    <div><input type="submit" value="Add user"/></div>
                </form>
            </div>
        </div>
    </div>
</div>